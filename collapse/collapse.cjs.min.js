"use strict";var e=require("vue");const t=/\..*/,o={mouseenter:"mouseover",mouseleave:"mouseout"},n=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function l(e,l,a){const r="string"==typeof l,u=r?a:l;let s=e.replace(t,"");const i=o[s];i&&(s=i);return n.indexOf(s)>-1||(s=e),[r,u,s]}const a=function(e,t,o,n){!function(e,t,o,n){if("string"!=typeof t||!e)return;o||(o=n,n=null);const[a,r,u]=l(t,o,n);e.addEventListener(u,r,a)}(e,t,o,n)};var r={name:"Collapse",props:{tag:{type:String,default:"div"},modelValue:Boolean,id:String,collapseClass:String,duration:{type:Number,default:300},sidenav:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:o}){const n=e.ref(null),r=e.computed((()=>[u.value,t.collapseClass,p.value?"navbar-collapse":"",f.value])),u=e.computed((()=>t.sidenav?"sidenav-collapse":v.value?"collapse":null)),s=e.inject("accordionState",null),i=e.inject("incrementAccordionItemsCount",!1),c=e.inject("setAccordionActiveItem",!1),d=e.ref(null);e.watchEffect((()=>{s&&s.active!==d.value&&o("update:modelValue",!1)}),{flush:"post"}),e.onMounted((()=>{v.value&&(n.value.style.height=n.value.scrollHeight+"px"),s&&(d.value=i(),v.value&&c(d.value))}));const v=e.ref(t.modelValue);e.watchEffect((()=>{v.value=t.modelValue,s&&null!==d.value&&v.value&&c(d.value)}));e.provide("openCollapse",(()=>{o("update:modelValue",!0)}));const p=e.inject("navbarFlexWrapValue",!1),f=e.computed((()=>!p||"wrap"===p.value&&v.value?"show":("nowrap"===p&&v.value,!1)));e.watch((()=>p.value),((e,n)=>{"nowrap"===e?v.value=!0:"wrap"===e&&((e,o)=>{"null"===o&&t.modelValue?v.value=!0:"null"!==o||t.modelValue?"nowrap"===o&&(v.value=!1):v.value=!1})(0,n),o("update:modelValue",v.value)}),{immediate:!0});const m=e.computed((()=>t.id?t.id:(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})("collapsibleContent-"))),h=e.ref(null),g=e.ref(!1),w=()=>[...document.getElementById(m.value).childNodes].filter((e=>""!=e.textContent.trim())).reduce(((e,t)=>e+y(t)),0),y=e=>{const t=e.offsetHeight;if(!t){if(document.createRange){const t=document.createRange();if(t.selectNodeContents(e),t.getBoundingClientRect){const e=t.getBoundingClientRect();if(e)return e.bottom-e.top}}return}const o=window.getComputedStyle(e);return["top","bottom"].map((e=>parseInt(o[`margin-${e}`]))).reduce(((e,t)=>e+t),t)},C=()=>{if(!v.value||g.value)return;g.value=!0;const e=window.innerWidth,t=w();n.value.style.height=`${t}px`,h.value=e,setTimeout((()=>{g.value=!1}),100)};return e.onMounted((()=>{h.value=window.innerWidth,a(window,"resize",C)})),e.onUnmounted((()=>{!function(e,t,o,n){if("string"!=typeof t||!e)return;const[a,r,u]=l(t,o,n);!function(e,t,o,n){e.removeEventListener(t,o,!!n)}(e,u,r,a?o:null)}(window,"resize",C)})),{collapse:n,className:r,isActive:v,uid:m,beforeEnter:e=>{e.style.height="0"},enter:e=>{e.style.height=`${w()}px`},afterEnter:e=>{e.classList.contains("show")||e.classList.add("show")},beforeLeave:e=>{e.style.height||(e.style.height=`${e.offsetHeight}px`)},leave:e=>{e.style.height="0"},afterLeave:e=>{e.classList.add("collapse")},props:t}}};r.render=function(t,o,n,l,a,r){return e.openBlock(),e.createBlock(e.Transition,{onBeforeEnter:l.beforeEnter,onEnter:l.enter,onAfterEnter:l.afterEnter,onBeforeLeave:l.beforeLeave,onLeave:l.leave,onAfterLeave:l.afterLeave,"enter-active-class":"collapsing","leave-active-class":"collapsing show",duration:n.duration},{default:e.withCtx((()=>[e.withDirectives((e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.tag),{class:e.normalizeClass(l.className),id:l.uid,ref:"collapse"},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default")])),_:3},8,["class","id"])),[[e.vShow,l.isActive]])])),_:3},8,["onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave","duration"])},r.__file="src/components/collapse/Collapse.vue",module.exports=r;
