import{ref as e,computed as t,inject as o,watchEffect as n,onMounted as l,provide as a,watch as u,onUnmounted as s,openBlock as r,createBlock as i,Transition as c,withCtx as d,withDirectives as v,resolveDynamicComponent as p,normalizeClass as f,renderSlot as m,vShow as g}from"vue";const h=/\..*/,w={mouseenter:"mouseover",mouseleave:"mouseout"},y=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function L(e,t,o){const n="string"==typeof t,l=n?o:t;let a=e.replace(h,"");const u=w[a];u&&(a=u);return y.indexOf(a)>-1||(a=e),[n,l,a]}const b=function(e,t,o,n){!function(e,t,o,n){if("string"!=typeof t||!e)return;o||(o=n,n=null);const[l,a,u]=L(t,o,n);e.addEventListener(u,a,l)}(e,t,o,n)};var E={name:"DtCollapse",props:{tag:{type:String,default:"div"},modelValue:Boolean,id:String,collapseClass:String,duration:{type:Number,default:300},sidenav:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:i}){const c=e(null),d=t((()=>[v.value,r.collapseClass,w.value?"navbar-collapse":"",y.value])),v=t((()=>r.sidenav?"sidenav-collapse":h.value?"collapse":null)),p=o("accordionState",null),f=o("incrementAccordionItemsCount",!1),m=o("setAccordionActiveItem",!1),g=e(null);n((()=>{p&&p.active!==g.value&&i("update:modelValue",!1)}),{flush:"post"}),l((()=>{h.value&&(c.value.style.height=c.value.scrollHeight+"px"),p&&(g.value=f(),h.value&&m(g.value))}));const h=e(r.modelValue);n((()=>{h.value=r.modelValue,p&&null!==g.value&&h.value&&m(g.value)}));a("openCollapse",(()=>{i("update:modelValue",!0)}));const w=o("navbarFlexWrapValue",!1),y=t((()=>!w||"wrap"===w.value&&h.value?"show":("nowrap"===w&&h.value,!1)));u((()=>w.value),((e,t)=>{"nowrap"===e?h.value=!0:"wrap"===e&&((e,t)=>{"null"===t&&r.modelValue?h.value=!0:"null"!==t||r.modelValue?"nowrap"===t&&(h.value=!1):h.value=!1})(0,t),i("update:modelValue",h.value)}),{immediate:!0});const E=t((()=>r.id?r.id:(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})("collapsibleContent-"))),C=e(null),B=e(!1),V=()=>[...document.getElementById(E.value).childNodes].filter((e=>""!=e.textContent.trim())).reduce(((e,t)=>e+x(t)),0),x=e=>{const t=e.offsetHeight;if(!t){if(document.createRange){const t=document.createRange();if(t.selectNodeContents(e),t.getBoundingClientRect){const e=t.getBoundingClientRect();if(e)return e.bottom-e.top}}return}const o=window.getComputedStyle(e);return["top","bottom"].map((e=>parseInt(o[`margin-${e}`]))).reduce(((e,t)=>e+t),t)},A=()=>{if(!h.value||B.value)return;B.value=!0;const e=window.innerWidth,t=V();c.value.style.height=`${t}px`,C.value=e,setTimeout((()=>{B.value=!1}),100)};return l((()=>{C.value=window.innerWidth,b(window,"resize",A)})),s((()=>{!function(e,t,o,n){if("string"!=typeof t||!e)return;const[l,a,u]=L(t,o,n);!function(e,t,o,n){e.removeEventListener(t,o,!!n)}(e,u,a,l?o:null)}(window,"resize",A)})),{collapse:c,className:d,isActive:h,uid:E,beforeEnter:e=>{e.style.height="0"},enter:e=>{e.style.height=`${V()}px`},afterEnter:e=>{e.classList.contains("show")||e.classList.add("show")},beforeLeave:e=>{e.style.height||(e.style.height=`${e.offsetHeight}px`)},leave:e=>{e.style.height="0"},afterLeave:e=>{e.classList.add("collapse")},props:r}}};E.render=function(e,t,o,n,l,a){return r(),i(c,{onBeforeEnter:n.beforeEnter,onEnter:n.enter,onAfterEnter:n.afterEnter,onBeforeLeave:n.beforeLeave,onLeave:n.leave,onAfterLeave:n.afterLeave,"enter-active-class":"collapsing","leave-active-class":"collapsing show",duration:o.duration},{default:d((()=>[v((r(),i(p(o.tag),{class:f(n.className),id:n.uid,ref:"collapse"},{default:d((()=>[m(e.$slots,"default")])),_:3},8,["class","id"])),[[g,n.isActive]])])),_:3},8,["onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave","duration"])},E.__file="src/components/dtcollapse/DtCollapse.vue";export{E as default};
