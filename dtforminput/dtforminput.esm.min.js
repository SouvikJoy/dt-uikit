import{computed as e,ref as t,onMounted as r,watch as a,openBlock as o,createElementBlock as l,mergeProps as n}from"vue";function u(t,r){return e((()=>t||(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(r)))}const i={ariaInvalid:{type:[Boolean,String],default:!1},autocomplete:{type:String,required:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:String,required:!1},formatter:{type:Function,required:!1},id:{type:String,required:!1},lazy:{type:Boolean,default:!1},lazyFormatter:{type:Boolean,default:!1},list:{type:String,required:!1},modelValue:{type:[String,Number],default:""},name:{type:String,required:!1},number:{type:Boolean,default:!1},placeholder:{type:String,required:!1},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{type:String,required:!1},state:{type:Boolean,default:null},trim:{type:Boolean,default:!1}};const d=["text","number","email","password","search","url","tel","date","time","range","color"];var p={name:"DtFormInput",props:{...i,max:{type:[String,Number],required:!1},min:{type:[String,Number],required:!1},step:{type:[String,Number],required:!1},type:{type:String,default:"text",validator:e=>d.includes(e)}},emits:["update:modelValue","change","blur","input"],setup(o,{emit:l}){const n=e((()=>{const e="range"===o.type,t="color"===o.type;return{"form-range":e,"form-control":t||!o.plaintext&&!e,"form-control-color":t,"form-control-plaintext":o.plaintext&&!e&&!t,[`form-control-${o.size}`]:o.size,"is-valid":!0===o.state,"is-invalid":!1===o.state}})),i=e((()=>d.includes(o.type)?o.type:"text")),{input:p,computedId:m,computedAriaInvalid:s,onInput:c,onChange:f,onBlur:y,focus:v,blur:g}=function(o,l){const n=t();let i=null,d=!0;const p=u(o.id,"input"),m=(e,t,r=!1)=>(e=String(e),"function"!=typeof o.formatter||o.lazyFormatter&&!r?e:(d=!1,o.formatter(e,t))),s=e=>o.trim?e.trim():o.number?parseFloat(e):e;r((()=>{n.value&&(n.value.value=o.modelValue)}));const c=e((()=>o.ariaInvalid?o.ariaInvalid.toString():!1===o.state?"true":void 0));return a((()=>o.modelValue),(e=>{n.value&&(n.value.value=i&&d?i:e,i=null,d=!0)})),{input:n,computedId:p,computedAriaInvalid:c,onInput:e=>{const{value:t}=e.target,r=m(t,e);if(!1===r||e.defaultPrevented)return void e.preventDefault();if(o.lazy)return;l("input",r);const a=s(r);o.modelValue!==a&&(i=t,l("update:modelValue",a))},onChange:e=>{const{value:t}=e.target,r=m(t,e);if(!1===r||e.defaultPrevented)return void e.preventDefault();if(!o.lazy)return;i=t,l("update:modelValue",r);const a=s(r);o.modelValue!==a&&l("change",r)},onBlur:e=>{if(l("blur",e),!o.lazy&&!o.lazyFormatter)return;const{value:t}=e.target,r=m(t,e,!0);i=t,l("update:modelValue",r)},focus:()=>{o.disabled||n.value?.focus()},blur:()=>{o.disabled||n.value?.blur()}}}(o,l);return{classes:n,localType:i,input:p,computedId:m,computedAriaInvalid:s,onInput:c,onChange:f,onBlur:y,focus:v,blur:g}}};const m=["id","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"];p.render=function(e,t,r,a,u,i){return o(),l("input",n({id:a.computedId,ref:"input",class:a.classes,name:e.name||void 0,form:e.form||void 0,type:a.localType,disabled:e.disabled,placeholder:e.placeholder,required:e.required,autocomplete:e.autocomplete||void 0,readonly:e.readonly||e.plaintext,min:r.min,max:r.max,step:r.step,list:"password"!==r.type?e.list:void 0,"aria-required":e.required?"true":void 0,"aria-invalid":a.computedAriaInvalid},e.$attrs,{onInput:t[0]||(t[0]=e=>a.onInput(e)),onChange:t[1]||(t[1]=e=>a.onChange(e)),onBlur:t[2]||(t[2]=e=>a.onBlur(e))}),null,16,m)},p.__file="src/components/dtforminput/DtFormInput.vue";export{p as default};
