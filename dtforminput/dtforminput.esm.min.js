import{computed as e,ref as t,onMounted as r,onActivated as a,watch as o,nextTick as l,openBlock as n,createElementBlock as u,mergeProps as i}from"vue";function d(t,r){return e((()=>t||(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(r)))}const p={ariaInvalid:{type:[Boolean,String],default:!1},autocomplete:{type:String,required:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:String,required:!1},formatter:{type:Function,required:!1},id:{type:String,required:!1},lazy:{type:Boolean,default:!1},lazyFormatter:{type:Boolean,default:!1},list:{type:String,required:!1},modelValue:{type:[String,Number],default:""},name:{type:String,required:!1},number:{type:Boolean,default:!1},placeholder:{type:String,required:!1},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{type:String,required:!1},state:{type:Boolean,default:null},trim:{type:Boolean,default:!1}};const m=["text","number","email","password","search","url","tel","date","time","range","color"];var s={name:"DtFormInput",props:{...p,max:{type:[String,Number],required:!1},min:{type:[String,Number],required:!1},step:{type:[String,Number],required:!1},type:{type:String,default:"text",validator:e=>m.includes(e)}},emits:["update:modelValue","change","blur","input"],setup(n,{emit:u}){const i=e((()=>{const e="range"===n.type,t="color"===n.type;return{"form-range":e,"form-control":t||!n.plaintext&&!e,"form-control-color":t,"form-control-plaintext":n.plaintext&&!e&&!t,[`form-control-${n.size}`]:n.size,"is-valid":!0===n.state,"is-invalid":!1===n.state}})),p=e((()=>m.includes(n.type)?n.type:"text")),{input:s,computedId:c,computedAriaInvalid:f,onInput:y,onChange:v,onBlur:g,focus:b,blur:I}=function(n,u){const i=t();let p=null,m=!0;const s=d(n.id,"input"),c=(e,t,r=!1)=>(e=String(e),"function"!=typeof n.formatter||n.lazyFormatter&&!r?e:(m=!1,n.formatter(e,t))),f=e=>n.trim?e.trim():n.number?parseFloat(e):e,y=()=>{l((()=>{n.autofocus&&i.value.focus()}))};r(y),r((()=>{i.value&&(i.value.value=n.modelValue)})),a(y);const v=e((()=>n.ariaInvalid?n.ariaInvalid.toString():!1===n.state?"true":void 0));return o((()=>n.modelValue),(e=>{i.value&&(i.value.value=p&&m?p:e,p=null,m=!0)})),{input:i,computedId:s,computedAriaInvalid:v,onInput:e=>{const{value:t}=e.target,r=c(t,e);if(!1===r||e.defaultPrevented)return void e.preventDefault();if(n.lazy)return;u("input",r);const a=f(r);n.modelValue!==a&&(p=t,u("update:modelValue",a))},onChange:e=>{const{value:t}=e.target,r=c(t,e);if(!1===r||e.defaultPrevented)return void e.preventDefault();if(!n.lazy)return;p=t,u("update:modelValue",r);const a=f(r);n.modelValue!==a&&u("change",r)},onBlur:e=>{if(u("blur",e),!n.lazy&&!n.lazyFormatter)return;const{value:t}=e.target,r=c(t,e,!0);p=t,u("update:modelValue",r)},focus:()=>{n.disabled||i.value.focus()},blur:()=>{n.disabled||i.value.blur()}}}(n,u);return{classes:i,localType:p,input:s,computedId:c,computedAriaInvalid:f,onInput:y,onChange:v,onBlur:g,focus:b,blur:I}}};const c=["id","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"];s.render=function(e,t,r,a,o,l){return n(),u("input",i({id:a.computedId,ref:"input",class:a.classes,name:e.name||void 0,form:e.form||void 0,type:a.localType,disabled:e.disabled,placeholder:e.placeholder,required:e.required,autocomplete:e.autocomplete||void 0,readonly:e.readonly||e.plaintext,min:r.min,max:r.max,step:r.step,list:"password"!==r.type?e.list:void 0,"aria-required":e.required?"true":void 0,"aria-invalid":a.computedAriaInvalid},e.$attrs,{onInput:t[0]||(t[0]=e=>a.onInput(e)),onChange:t[1]||(t[1]=e=>a.onChange(e)),onBlur:t[2]||(t[2]=e=>a.onBlur(e))}),null,16,c)},s.__file="src/components/dtforminput/DtFormInput.vue";export{s as default};
