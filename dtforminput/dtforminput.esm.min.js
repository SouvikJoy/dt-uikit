import{computed as e,ref as t,onMounted as r,watch as a,openBlock as n,createElementBlock as o,mergeProps as l}from"vue";function u(t,r){return e((()=>t||(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(r)))}const i={ariaInvalid:{type:[Boolean,String],default:!1},autocomplete:{type:String,required:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:String,required:!1},formatter:{type:Function,required:!1},id:{type:String,required:!1},lazy:{type:Boolean,default:!1},lazyFormatter:{type:Boolean,default:!1},list:{type:String,required:!1},modelValue:{type:[String,Number],default:""},name:{type:String,required:!1},number:{type:Boolean,default:!1},placeholder:{type:String,required:!1},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{type:String,required:!1},state:{type:Boolean,default:null},trim:{type:Boolean,default:!1}};const d=["text","number","email","password","search","url","tel","date","time","range","color"];var p={name:"DtFormInput",props:{...i,max:{type:[String,Number],required:!1},min:{type:[String,Number],required:!1},step:{type:[String,Number],required:!1},type:{type:String,default:"text",validator:e=>d.includes(e)}},emits:["update:modelValue","change","blur","input"],setup(n,{emit:o}){const l=e((()=>{const e="range"===n.type,t="color"===n.type;return{"form-range":e,"form-control":t||!n.plaintext&&!e,"form-control-color":t,"form-control-plaintext":n.plaintext&&!e&&!t,[`form-control-${n.size}`]:n.size,"is-valid":!0===n.state,"is-invalid":!1===n.state}})),i=e((()=>d.includes(n.type)?n.type:"text")),{input:p,computedId:m,computedAriaInvalid:s,onInput:c,onChange:f,onBlur:y,focus:v,blur:g}=function(n,o){const l=t();let i=null,d=!0;const p=u(n.id,"input"),m=(e,t,r=!1)=>(e=String(e),"function"!=typeof n.formatter||n.lazyFormatter&&!r?e:(d=!1,n.formatter(e,t))),s=e=>n.trim?e.trim():n.number?parseFloat(e):e;r((()=>{l.value&&(l.value.value=n.modelValue)}));const c=e((()=>n.ariaInvalid?n.ariaInvalid.toString():!1===n.state?"true":void 0));return a((()=>n.modelValue),(e=>{l.value&&(l.value.value=i&&d?i:e,i=null,d=!0)})),{input:l,computedId:p,computedAriaInvalid:c,onInput:e=>{const{value:t}=e.target,r=m(t,e);if(!1===r||e.defaultPrevented)return void e.preventDefault();if(n.lazy)return;o("input",r);const a=s(r);n.modelValue!==a&&(i=t,o("update:modelValue",a))},onChange:e=>{const{value:t}=e.target,r=m(t,e);if(!1===r||e.defaultPrevented)return void e.preventDefault();if(!n.lazy)return;i=t,o("update:modelValue",r);const a=s(r);n.modelValue!==a&&o("change",r)},onBlur:e=>{if(o("blur",e),!n.lazy&&!n.lazyFormatter)return;const{value:t}=e.target,r=m(t,e,!0);i=t,o("update:modelValue",r)}}}(n,o);return{classes:l,localType:i,input:p,computedId:m,computedAriaInvalid:s,onInput:c,onChange:f,onBlur:y,focus:v,blur:g}}};const m=["id","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"];p.render=function(e,t,r,a,u,i){return n(),o("input",l({id:a.computedId,ref:"input",class:a.classes,name:e.name||void 0,form:e.form||void 0,type:a.localType,disabled:e.disabled,placeholder:e.placeholder,required:e.required,autocomplete:e.autocomplete||void 0,readonly:e.readonly||e.plaintext,min:r.min,max:r.max,step:r.step,list:"password"!==r.type?e.list:void 0,"aria-required":e.required?"true":void 0,"aria-invalid":a.computedAriaInvalid},e.$attrs,{onInput:t[0]||(t[0]=e=>a.onInput(e)),onChange:t[1]||(t[1]=e=>a.onChange(e)),onBlur:t[2]||(t[2]=e=>a.onBlur(e))}),null,16,m)},p.__file="src/components/dtforminput/DtFormInput.vue";export{p as default};
